# purpose: to quickly back up a script version into ~/archive via git

# The point of it is to use as a quick backup for if I am working on something
# outside a repository and I want to make sure I don't lose it.
# bs stands for "backup script" I swear.

VERSION=1.0.3
PROG=`basename $0`

errout() {
    echo "$PROG: $1" >&2
    exit 1
}

FILE=$1
if [ ! -f $FILE ]; then
    errout "File \"$FILE\" not found."
fi

DIR=`dirname $FILE`
BASE=`basename $FILE`
HERE=`pwd`
cd $DIR
FDIR=`pwd`
cd $HERE
FULL=`echo "$FDIR/$BASE" | sed -e 's?/?%?g'`

mkdir ~/archive 2>/dev/null
cp $FILE ~/archive/$FULL
cd ~/archive
git init >/dev/null 2>&1
git add $FULL
git commit -m "archived"
git push origin master 2>/dev/null

